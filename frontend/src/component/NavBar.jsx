import React, { useRef, useState } from 'react'
import { navbarStyles } from '../assets/dummyStyles'
import logo from '../assets/logo.png'
import { Link, useNavigate } from 'react-router-dom'
import {SignedOut, useAuth, useClerk, useUser} from '@clerk/clerk-react'

function NavBar() {

    const [open, setOpen] = useState(false);
    const [profileOpen, setProfileOpen]= useState(false);
    const {user} = useUser();
    const {getToken, isSignedIn} = useAuth
    const clerk = useClerk();
    const navigate = useNavigate();
    const profileRef = useRef(null);
    const TOKEN_KEY = "token";
    

    //functions
    function openSignIn(){
        try {
            if(clerk && typeof clerk.openSignIn === "function"){
                clerk.openSignIn();
            }else{
                navigate("/login")
            }
        } catch (error) {
            console.error("openSignIN failed", error)
            navigate("/login")
        }
    }
    function openSignUp(){
        try {
            if(clerk && typeof clerk.openSignUp === "function"){
                clerk.openSignUp();
            }else{
                navigate("/signup")
            }
        } catch (error) {
            console.error("openSignup failed", error)
            navigate("/signup")
        }
    }
  return (
    <header className={navbarStyles.header}>
        <div className={navbarStyles.container}>
            <nav className={navbarStyles.nav}>
                <div className={navbarStyles.logoSection}>
                    <Link to='/' className={navbarStyles.logoLink}>
                        <img src={logo} alt="logo" className={navbarStyles.logoImage} />
                        <span className={navbarStyles.logoText}> Ai Invoice</span>
                    </Link>
                    <div className={navbarStyles.desktopNav}>
                        <a href="#features" className={navbarStyles.navLink}>
                        Features
                        </a>
                        <a href="#pricing" className={navbarStyles.navLinkInactive}>
                            Pricing
                        </a>
                    </div>

                </div>
                <div className='flex items-center gap-4'>
                    <div className={navbarStyles.authSection}>
                        <SignedOut>
                            <button onClick={openSignIn} className={navbarStyles.signInButton } type="button">
                                Sign In
                            </button>
                            <button onClick={openSignUp} className={navbarStyles.signUpButton} type="button"> 
                                Sign Up
                            </button>
                        </SignedOut>
                    </div>
                </div>
            </nav>
        </div>
    </header>
  )
}

export default NavBar